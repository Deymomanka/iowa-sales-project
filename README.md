# BigQuery × ML モデル比較プロジェクト

本プロジェクトは、BigQuery 上で大規模データセットを扱いながら、複数のBigQuery MLを学習・評価・予測し、精度を比較することを目的としています。

Notebookのコードを併せてご参照ください。  
モデルの精度や予測結果は、以下のStreamlitアプリで確認いただけます。

**[Streamlit アプリはこちら](https://iowa-sales-project.streamlit.app/)**

---

## プロジェクト概要

### 目的

- 約3,200万件の大規模データセットに対して、最低限の前処理を施し、BigQuery 上でモデルの構築・評価・予測を行う。
- 各モデルの精度を比較し、予測性能を可視化。

### 主な課題

- **前処理の効率化**  
  大規模データ（約3,200万件）に対する前処理では、処理時間やメモリ使用量に配慮が必要。
- **予測モデル構築の制約**  
  BigQuery ML におけるリソース制限や構文上の制約に対応しつつ、複数のモデルを実装。

### 使用データ

- データソース：BigQuery 公開データセット `iowa_liquor_sales`
- レコード数：31,980,876 件
- カラム数：23 列
- 期間：2012-01-03 〜 2025-06-30

---

## 使用モデル（BigQuery ML）

以下の4つのBigQuery MLをSQLで構築し、精度を比較しました：

- `線形回帰モデル（時系列データなし）`
- `線形回帰モデル（時系列データあり）`
- `線形回帰モデル（カテゴリ変数入り）`
- `ブーストツリー`

---

## ディレクトリ構成


.
├── notebooks/
│   └── 最新版.ipynb                      # モデル構築・評価までのノートブック
├── streamlit_app/
│   ├── app.py                          # Streamlit エントリーポイント
│   ├── overview.py                     # 共通情報・データ概要の表示
│   ├── model_eval.py                   # 各モデルの評価ページ
│   ├── comparison.py                   # モデル間比較用ページ
│   ├── f_importance.py                 # 特徴量重要度の可視化
│   ├── conclusion.py                   # 考察・今後の展望まとめ
│   └── utils.py                        # 補助関数（BigQuery接続など）
├── README.md
└── requirements.txt                   # 使用ライブラリ一覧

